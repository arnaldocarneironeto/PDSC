<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:body>
        <ui:composition template="/template/template.xhtml">

            <ui:define name="menu">
                <p:layoutUnit position="west" size="245">
                    <h:form rendered="#{loginBean.aluno != null or loginBean.representante != null}">
                        <p:menu>
                            <p:submenu label="Usuário">
                                <p:menuitem value="Alterar Dados" action="#{pageControlBean.vaParaAlteracaoCadastral()}" icon="fa fa-edit" />
                            </p:submenu>                       
                        </p:menu>
                    </h:form>
                    <h:form rendered="#{loginBean.aluno != null}">
                        <p:menu>
                            <p:submenu label="Aluno">
                                <p:menuitem value="Preferência de escolas" action="#{pageControlBean.vaParaPreferenciaEscolas()}" />
                                <p:menuitem value="Escola para a qual foi aceito(a)" action="#{pageControlBean.vaParaVerEscolaQueFoiAceito()}" />
                            </p:submenu>                       
                        </p:menu>
                    </h:form>
                    <h:form rendered="#{loginBean.representante != null}">
                        <p:menu>
                            <p:submenu label="Gerenciar">
                                <p:menuitem value="Escola" action="#{pageControlBean.vaParaGerenciarEscola()}" />
                                <p:menuitem value="Lista de alunos" action="#{pageControlBean.vaParaVerAlunos()}" />
                            </p:submenu>                       
                        </p:menu>
                    </h:form>
                    <h:form rendered="#{loginBean.administrador != null}">
                        <p:menu>
                            <p:submenu label="Administrar" >
                                <p:menuitem value="Alunos" action="#{pageControlBean.vaParaGerenciarAlunos()}" />
                                <p:menuitem value="Representantes" action="#{pageControlBean.vaParaGerenciarRepresentantes()}" />
                                <p:menuitem value="Administradores" action="#{pageControlBean.vaParaGerenciarAdministradores()}" />
                                <p:menuitem value="Sistema" action="#{pageControlBean.vaParaGerenciarSistema()}" />
                            </p:submenu> 
                        </p:menu>
                    </h:form>
                </p:layoutUnit>
            </ui:define>

            
            <ui:define name="conteudo">
                <p:layoutUnit position="center">
                	<f:view>
                    	<f:metadata>
                    		<f:viewAction action="#{viewUpdater.atualizaView(loginBean.usuario)}" />
                    	</f:metadata>
	                	<p:messages style="color:red;margin:8px;" />
	
	                    <p:panel rendered="#{loginBean.usuario == null}"> 
	                        <h:form>
	                            <h:panelGrid id="dadosUsuario" columns="3">
	                                <p:outputLabel for="nome" value="Usuário:" />
	                                <p:inputText id="nome" label="Nome" maxlength="50" size="50" value="#{loginBean.login}" required="true" requiredMessage="Digite seu nome de usuário" />
	                                <p:message for="nome"/>
	
	                                <p:outputLabel for="senha" value="Senha:" />
	                                <p:password id="senha" label="Senha" maxlength="50" size="50" value="#{loginBean.senha}" required="true" requiredMessage="Digite sua senha" />
	                                <p:message for="senha"/>
	
	                                <p:commandButton value="Entrar" action="#{loginBean.logon()}" icon="fa fa-sign-in"/>                             
	                            </h:panelGrid>
	                        </h:form>
	                    </p:panel>
	
	                    <p:panel id="conteudoaberto" rendered="#{loginBean.usuario == null}" header="Caríssimo aluno, cadastre-se aqui" footer="Representante de escola: entre em contato diretamente conosco (sdvea@sdvea.com.br)">
	                        <h:form >
	                            <h:panelGrid columns="3">
	                                <p:outputLabel value="Nome" for="cadNome" />
	                                <p:inputText id="cadNome" value="#{cadastroAlunoBean.nome}" label="Nome" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="cadNome"/>

	                                <p:outputLabel value="E-mail" for="cadEmail" />
	                                <p:inputText id="cadEmail" value="#{cadastroAlunoBean.email}" label="Email" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="cadEmail"/>

	                                <p:outputLabel value="Nome de usuário" for="cadLogin" />
	                                <p:inputText id="cadLogin" value="#{cadastroAlunoBean.login}" label="Login" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="cadLogin"/>

	                                <p:outputLabel value="Senha" for="cadSenha" />
	                                <p:password id="cadSenha" value="#{cadastroAlunoBean.senha}" label="Senha" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="cadSenha"/>

	                                <p:outputLabel value="Confirmação de senha" for="cadConfSenha" />
	                                <p:password id="cadConfSenha" value="#{cadastroAlunoBean.confSenha}" label="confSenha" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="cadConfSenha"/>
	                            </h:panelGrid>
	                            <p:commandButton action="#{cadastroAlunoBean.cadastrar()}" value="Cadastre-se" />
	                        </h:form>
	                    </p:panel>
	
	                    <p:panel id="dadosAluno" rendered="#{loginBean.aluno != null and pageControlBean.isInAlteracaoCadastral()}" header="Veja e/ou altere seus dados">
	                        <h:form >
	                            <h:panelGrid columns="3">
	                                <p:outputLabel value="Nome" for="nomeAluno" />
	                                <p:inputText id="nomeAluno" value="#{alteraAluno.aluno.nome}" required="true" requiredMessage="O campo não pode ser vazio" />
	                                <p:message for="nomeAluno"/>

	                                <p:outputLabel value="Email" for="emailAluno" />
	                                <p:inputText id="emailAluno" value="#{alteraAluno.aluno.email}" required="true" requiredMessage="O campo não pode ser vazio" />
	                                <p:message for="emailAluno"/>

	                                <p:outputLabel value="Nome de usuário" for="loginAluno" />
	                                <p:inputText id="loginAluno" value="#{alteraAluno.aluno.login}" disabled="true" />
	                                <p:message for="loginAluno" />

	                                <p:outputLabel value="Senha" for="senhaAluno" />
	                                <p:password id="senhaAluno" value="#{alteraAluno.senha}" required="true" requiredMessage="O campo não pode ser vazio" />
	                                <p:message for="senhaAluno"/>

	                                <p:outputLabel value="Confirmação de Senha" for="confSenhaAluno" />
	                                <p:password id="confSenhaAluno" value="#{alteraAluno.confSenha}" required="true" requiredMessage="O campo não pode ser vazio" />
	                                <p:message for="confSenhaAluno"/>
	                            </h:panelGrid>
	
		                        <h:panelGroup rendered="#{!alteraAluno.editandoNota}">
	                                <p:dataTable value="#{alteraAluno.notas.entrySet().toArray()}" var="nota">
	                                    <f:facet name="header">
	                                        <p:commandButton action="#{alteraAluno.nova()}" value="Nova nota">
	                                            <f:ajax execute="@form" render="@form" />
	                                        </p:commandButton>
	                                    </f:facet>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Disciplina" /></f:facet>
	                                        <p:outputLabel value="#{nota.key}" />
	                                    </p:column>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Nota" /></f:facet>
	                                        <p:outputLabel value="#{nota.value}" />
	                                    </p:column>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Atualizar" /></f:facet>
	                                        <p:commandButton action="#{alteraAluno.atualizar(nota)}" value="Atualizar">
	                                            <f:ajax render="@form" execute="@form" />
	                                        </p:commandButton>
	                                    </p:column>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Excluir" /></f:facet>
	                                        <p:commandButton action="#{alteraAluno.excluir(nota)}" value="Excluir" onclick="if (!confirm('Deseja realmente excluir a nota?')) return false">
	                                            <f:ajax render="@form" execute="@form" />
	                                        </p:commandButton>
	                                    </p:column>
	                                </p:dataTable>
	                            </h:panelGroup>
	
	                            <h:panelGroup rendered="#{alteraAluno.editandoNota}">
	                                <h:panelGrid columns="2">
	                                    <f:facet name="header"><p:outputLabel value="Atualizando nota" /></f:facet>
	                                    <p:outputLabel value="Disciplina" for="nomeDisciplina" />
	                                    <p:inputText id="nomeDisciplina" value="#{alteraAluno.nomeDisciplina}"/>
	                                    <p:outputLabel value="Nota" for="notaDisciplina" />
	                                    <p:inputText id="notaDisciplina" value="#{alteraAluno.notaDisciplina}"/>
	                                    <f:facet name="footer">
	                                        <div align="center">
	                                            <p:commandButton action="#{alteraAluno.cancelar()}" value="Cancelar" immediate="true">
	                                                <f:ajax execute="@form" render="@form"/>
	                                            </p:commandButton>
	                                            <p:commandButton action="#{alteraAluno.adicionar()}" value="Adicionar critério">
	                                                <f:ajax execute="@form" render="@form"/>
	                                            </p:commandButton>
	                                        </div>
	                                    </f:facet>
	                                </h:panelGrid>
	                            </h:panelGroup>
	                            <p:commandButton action="#{alteraAluno.salvar(loginBean.aluno)}" value="Salvar alterações" />
	                        </h:form>
	                    </p:panel>
	
	                    <p:panel id="ordemEscolas" rendered="#{loginBean.aluno != null and pageControlBean.isInPreferenciaEscolas()}" header="Ordene as escolas conforme a sua preferência">
	                        <h:form>
	                            <p:orderList value="#{orderListView.escolas}" var="escola" itemValue="#{escola}" controlsLocation="right" responsive="true" converter="escolaConverter" >
	                                <p:column styleClass="your-orderlist-row" style="width:30%;">
	                                    <h:outputText value="#{escola.nome}" />
	                                </p:column>
	                                <p:column styleClass="your-orderlist-row" style="width:5%;">
	                                    <h:outputText value="#{escola.conceito}" />
	                                </p:column>
	                                <p:column styleClass="your-orderlist-row" style="width:62%;">
	                                    <h:outputText value="#{escola.descricao}" />
	                                </p:column>
	                            </p:orderList>
	                            <h:panelGroup>
	                                <h:outputText value="#{escola}" />
	                            </h:panelGroup>
	                            <p:commandButton action="#{orderListView.atualizarPreferencia(loginBean.aluno)}" value="Salvar" />
	                        </h:form>
	                    </p:panel>
	
	                    <p:panel id="escola" rendered="#{loginBean.aluno != null and pageControlBean.isInVerEscolaQueFoiAceito()}" header="Você foi selecionado(a) para esta escola:">
	                        <h:form>
	                            <h:panelGrid columns="2">
	                                <p:outputLabel value="Nome" for="nomeEscola" />
	                                <p:outputLabel value="#{loginBean.aluno.escola_que_selecionou_este_aluno.nome}" id="nomeEscola" />
	                                <p:outputLabel value="Conceito" for="conceitoEscola" />
	                                <p:outputLabel value="#{loginBean.aluno.escola_que_selecionou_este_aluno.conceito}" id="conceitoEscola" />
	                                <p:outputLabel value="Descrição" for="descricaoEscola" />
	                                <p:outputLabel value="#{loginBean.aluno.escola_que_selecionou_este_aluno.descricao}" id="descricaoEscola" />
	                            </h:panelGrid>
	                        </h:form>
	                    </p:panel>
	
	                    <p:panel id="dadosRepresentante" rendered="#{loginBean.representante != null and pageControlBean.isInAlteracaoCadastral()}" header="Veja e/ou altere seus dados">
	                        <h:form>
	                            <h:panelGrid columns="3">
	                                <p:outputLabel value="Nome" for="nomeRepresentante" />
	                                <p:inputText id="nomeRepresentante" value="#{representantesCRUDBean.representanteAtual.nome}" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="nomeRepresentante"/>

	                                <p:outputLabel value="Email" for="emailRepresentante" />
	                                <p:inputText id="emailRepresentante" value="#{representantesCRUDBean.representanteAtual.email}" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="emailRepresentante"/>

	                                <p:outputLabel value="Nome de usuário" for="loginRepresentante" />
	                                <p:inputText id="loginRepresentante" value="#{representantesCRUDBean.representanteAtual.login}" disabled="true" />
	                                <p:message for="loginRepresentante" />

	                                <p:outputLabel value="Senha" for="senhaRepresentante" />
	                                <p:password id="senhaRepresentante" value="#{representantesCRUDBean.representanteAtual.senha}" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="senhaRepresentante"/>
	                                
	                                <p:outputLabel value="Confirmação de Senha" for="confSenhaRepresentante" />
	                                <p:password id="confSenhaRepresentante" value="Confirmação de Senha" required="true" requiredMessage="O campo deve ser preenchido" />
	                                <p:message for="confSenhaRepresentante"/>
	                            </h:panelGrid>
	                            <p:commandButton action="#" value="Salvar alterações" />
	                        </h:form>
	                    </p:panel>
	
	                    <h:panelGroup id="dadosEscola" rendered="#{loginBean.representante != null and pageControlBean.isInGerenciarEscola()}" >
	                        <h1>Veja e/ou altere os dados da escola</h1>
	                        <h:form>
	                            <p:messages />
	                            <h:panelGroup>
	                            	<h:panelGrid columns="3">
		                                <p:outputLabel value="Nome" for="escolaNome" />
		                                <p:inputText id="escolaNome" value="#{escolaManager.nome}" required="true" requiredMessage="O campo não pode ser vazio" />
		                                <p:message for="escolaNome"/>

		                                <p:outputLabel value="Conceito" for="escolaConceito" />
		                                <p:inputText id="escolaConceito" value="#{escolaManager.conceito}" required="true" requiredMessage="O campo não pode ser vazio" />
		                                <p:message for="escolaConceito"/>

		                                <p:outputLabel value="Descrição" for="escolaDescrição" />
		                                <p:inputTextarea id="escolaDescrição" value="#{escolaManager.descricao}" maxlength="1000" cols="125" rows="8" required="true" requiredMessage="O campo não pode ser vazio" />
		                                <p:message for="escolaDescrição"/>

		                                <p:outputLabel value="Número de vagas disponíveis" for="escolaVagas" />
		                                <p:inputText id="escolaVagas" value="#{escolaManager.vagas}" required="true" requiredMessage="O campo não pode ser vazio" />
		                                <p:message for="escolaVagas"/>
	                                </h:panelGrid>
	                            </h:panelGroup>
	
	                            <h:panelGroup rendered="#{!escolaManager.editandoCriterio}">
	                                <p:dataTable value="#{escolaManager.criterios.entrySet().toArray()}" var="criterio">
	                                    <f:facet name="header">
	                                        <p:commandButton action="#{escolaManager.novo()}" value="Novo critério">
	                                            <f:ajax execute="@form" render="@form" />
	                                        </p:commandButton>
	                                    </f:facet>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Disciplina" /></f:facet>
	                                        <p:outputLabel value="#{criterio.key}" />
	                                    </p:column>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Critério" /></f:facet>
	                                        <p:outputLabel value="#{criterio.value}" />
	                                    </p:column>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Atualizar" /></f:facet>
	                                        <p:commandButton action="#{escolaManager.atualizar(criterio)}" value="Atualizar">
	                                            <f:ajax render="@form" execute="@form" />
	                                        </p:commandButton>
	                                    </p:column>
	                                    <p:column>
	                                        <f:facet name="header"><p:outputLabel value="Excluir" /></f:facet>
	                                        <p:commandButton action="#{escolaManager.excluir(criterio)}" value="Excluir" onclick="if (!confirm('Deseja realmente excluir o critério?'))
	                                                    return false">
	                                            <f:ajax render="@form" execute="@form" />
	                                        </p:commandButton>
	                                    </p:column>
	                                </p:dataTable>
	                            </h:panelGroup>
	
	                            <h:panelGroup rendered="#{escolaManager.editandoCriterio}">
	                                <h:panelGrid columns="2">
	                                    <f:facet name="header"><p:outputLabel value="Atualizando critério" /></f:facet>
	                                    <p:outputLabel value="Disciplina" for="criterioNome" />
	                                    <p:inputText id="criterioNome" value="#{escolaManager.nomeCriterio}"/>
	                                    <p:outputLabel value="Peso" for="criterioPeso" />
	                                    <p:inputText id="criterioPeso" value="#{escolaManager.peso}"/>
	                                    <f:facet name="footer">
	                                        <div align="center">
	                                            <p:commandButton action="#{escolaManager.cancelar()}" value="Cancelar" immediate="true">
	                                                <f:ajax execute="@form" render="@form"/>
	                                            </p:commandButton>
	                                            <p:commandButton action="#{escolaManager.adicionar()}" value="Adicionar critério">
	                                                <f:ajax execute="@form" render="@form"/>
	                                            </p:commandButton>
	                                        </div>
	                                    </f:facet>
	                                </h:panelGrid>
	                            </h:panelGroup>
	                            <p:commandButton action="#{escolaManager.salvar(loginBean.representante)}" value="Salvar tudo" />
	                        </h:form>
	                    </h:panelGroup>
	
	                    <p:panel rendered="#{loginBean.representante != null and pageControlBean.isInVerAlunos()}" header="Lista de alunos selecionados">
	                        <p:dataTable value="#{escolaManager.alunosSelecionados}" var="aluno">
	                            <p:column>
	                                <f:facet name="header"><p:outputLabel value="Nome" /></f:facet>
	                                <p:outputLabel value="#{aluno.nome}" />
	                            </p:column>
	                            <p:column>
	                                <f:facet name="header"><p:outputLabel value="E-mail" /></f:facet>
	                                <p:outputLabel value="#{aluno.email}" />
	                            </p:column>
	                            <p:column>
	                                <f:facet name="header"><p:outputLabel value="Notas" /></f:facet>
	                                <p:outputLabel value="#{aluno.notas}" />
	                            </p:column>
	                        </p:dataTable>
	                    </p:panel>
	
	                    <h:panelGroup rendered="#{loginBean.administrador != null and pageControlBean.isInGerenciarAlunos()}">
	                        <h1>Gerenciar alunos</h1>
	                        <h:form>
		                        <p:dataTable value="#{alunosCRUDBean.lista()}" var="aluno" id="listaAlunos" rendered="#{!alunosCRUDBean.editando}">
		                            <f:facet name="header">
		                                <p:commandButton action="#{alunosCRUDBean.novo()}" value="Novo">			
		                                    <f:ajax execute="@form" render="@form"/>
		                                </p:commandButton>
		                            </f:facet>					
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Nome" /></f:facet>
		                                <p:outputLabel value="#{aluno.nome}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="E-mail" /></f:facet>
		                                <p:outputLabel value="#{aluno.email}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Nome de usuário" /></f:facet>
		                                <p:outputLabel value="#{aluno.login}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Senha" /></f:facet>
		                                <p:outputLabel value="•••••" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Atualizar" /></f:facet>
		                                <p:commandButton action="#{alunosCRUDBean.atualizar(aluno)}" value="Atualizar">
		                                    <f:ajax render="@form" execute="@form"/>
		                                </p:commandButton>
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Excluir" /></f:facet>
		                                <p:commandButton action="#{alunosCRUDBean.apagar(aluno)}" value="Excluir" onclick="if (!confirm('Deseja realmente excluir o aluno?'))
		                                            return false">
		                                    <f:ajax execute = "@form" render="@form"/>
		                                </p:commandButton>
		                            </p:column>
		                        </p:dataTable>
		                        <h:panelGrid columns="3" rendered="#{alunosCRUDBean.editando}">
		                            <f:facet name="header"><p:outputLabel value="Editando aluno" /></f:facet>
		                            <p:outputLabel value="Nome" />
		                            <p:inputText id="nomeAluno" value="#{alunosCRUDBean.alunoAtual.nome}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="nomeAluno"/>

		                            <p:outputLabel value="E-mail" />
		                            <p:inputText id="emailAluno" value="#{alunosCRUDBean.alunoAtual.email}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="emailAluno"/>

		                            <p:outputLabel value="Nome de usuário" />
		                            <p:inputText id="usernameAluno" value="#{alunosCRUDBean.alunoAtual.login}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="usernameAluno"/>

		                            <p:outputLabel value="Senha" />
		                            <p:password id="passwrdAluno" value="#{alunosCRUDBean.alunoAtual.senha}" feedback="true"
		                                        promptLabel="Digite a nova senha"
		                                        weakLabel="Senha fraca"
		                                        goodLabel="Senha boa"
		                                        strongLabel="Senha forte" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="passwrdAluno"/>

		                            <f:facet name="footer">
		                                <div align="center">
		                                    <p:commandButton action="#{alunosCRUDBean.cancelar()}" value="Cancelar" immediate="true">
		                                        <f:ajax execute="@form" render="@form"/>
		                                    </p:commandButton>
		                                    <p:commandButton action="#{alunosCRUDBean.salvar()}" value="Salvar">
		                                        <f:ajax execute="@form" render="@form"/>
		                                    </p:commandButton>
		                                </div>
		                            </f:facet>
	    	                    </h:panelGrid>
	                        </h:form>
	                    </h:panelGroup>
	
	                    <h:panelGroup rendered="#{loginBean.administrador != null and pageControlBean.isInGerenciarRepresentantes()}">
	                        <h1>Gerenciar representantes</h1>
	                        <h:form>
		                        <p:dataTable value="#{representantesCRUDBean.lista()}" var="representante" id="listaRepresentantes" rendered="#{!representantesCRUDBean.editando}">
		                            <f:facet name="header">
		                                <p:commandButton action="#{representantesCRUDBean.novo()}" value="Novo">			
		                                    <f:ajax execute="@form" render="@form"/>
		                                </p:commandButton>
		                            </f:facet>					
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Nome" /></f:facet>
		                                <p:outputLabel value="#{representante.nome}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="E-mail" /></f:facet>
		                                <p:outputLabel value="#{representante.email}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Nome de usuário" /></f:facet>
		                                <p:outputLabel value="#{representante.login}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Senha" /></f:facet>
		                                <p:outputLabel value="•••••" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Atualizar" /></f:facet>
		                                <p:commandButton action="#{representantesCRUDBean.atualizar(representante)}" value="Atualizar">
		                                    <f:ajax render="@form" execute="@form"/>
		                                </p:commandButton>
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Excluir" /></f:facet>
		                                <p:commandButton action="#{representantesCRUDBean.apagar(representante)}" value="Excluir" onclick="if (!confirm('Deseja realmente excluir o representante (e a respectiva escola)?'))
		                                            return false">
		                                    <f:ajax execute = "@form" render="@form"/>
		                                </p:commandButton>
		                            </p:column>
		                        </p:dataTable>
		                        <h:panelGrid columns="3"  rendered="#{representantesCRUDBean.editando}">
		                            <f:facet name="header"><p:outputLabel value="Editando representante" /></f:facet>
		                            <p:outputLabel value="Nome" />
		                            <p:inputText id="repCrudNome" value="#{representantesCRUDBean.representanteAtual.nome}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="repCrudNome"/>

		                            <p:outputLabel value="E-mail" />
		                            <p:inputText id="repCrudEmail" value="#{representantesCRUDBean.representanteAtual.email}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="repCrudEmail"/>

		                            <p:outputLabel value="Nome de usuário" />
		                            <p:inputText id="repCrudUserName" value="#{representantesCRUDBean.representanteAtual.login}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="repCrudUserName"/>

		                            <p:outputLabel value="Senha" />
		                            <p:password id="repCrudSenha" value="#{representantesCRUDBean.representanteAtual.senha}" feedback="true"
		                                        promptLabel="Digite a nova senha"
		                                        weakLabel="Senha fraca"
		                                        goodLabel="Senha boa"
		                                        strongLabel="Senha forte" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="repCrudSenha"/>

		                            <f:facet name="footer">
		                                <div align="center">
		                                    <p:commandButton action="#{representantesCRUDBean.cancelar()}" value="Cancelar" immediate="true">
		                                        <f:ajax execute="@form" render="@form"/>
		                                    </p:commandButton>
		                                    <p:commandButton action="#{representantesCRUDBean.salvar()}" value="Salvar">
		                                        <f:ajax execute="@form" render="@form"/>
		                                    </p:commandButton>
		                                </div>
		                            </f:facet>
		                        </h:panelGrid>
	                        </h:form>
	                    </h:panelGroup>
	
	                    <h:panelGroup rendered="#{loginBean.administrador != null and pageControlBean.isInGerenciarAdministradores()}">
	                        <h1>Gerenciar Administradores</h1>
	                        <h:form>
		                        <p:dataTable value="#{administradoresCRUDBean.lista()}" var="administrador" id="listaAdministradores" rendered="#{!administradoresCRUDBean.editando}">
		                            <f:facet name="header">
		                                <p:commandButton action="#{administradoresCRUDBean.novo()}" value="Novo">			
		                                    <f:ajax execute="@form" render="@form"/>
		                                </p:commandButton>
		                            </f:facet>					
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Nome" /></f:facet>
		                                <p:outputLabel value="#{administrador.nome}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="E-mail" /></f:facet>
		                                <p:outputLabel value="#{administrador.email}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Nome de usuário" /></f:facet>
		                                <p:outputLabel value="#{administrador.login}" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Senha" /></f:facet>
		                                <p:outputLabel value="•••••" />
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Atualizar" /></f:facet>
		                                <p:commandButton action="#{administradoresCRUDBean.atualizar(administrador)}" value="Atualizar">
		                                    <f:ajax render="@form" execute="@form"/>
		                                </p:commandButton>
		                            </p:column>
		                            <p:column>
		                                <f:facet name="header"><p:outputLabel value="Excluir" /></f:facet>
		                                <p:commandButton action="#{administradoresCRUDBean.apagar(administrador)}" value="Excluir" onclick="if (!confirm('Deseja realmente excluir o administrador?'))
		                                            return false">
		                                    <f:ajax execute = "@form" render="@form"/>
		                                </p:commandButton>
		                            </p:column>
		                        </p:dataTable>
		                        <h:panelGrid columns="3" rendered="#{administradoresCRUDBean.editando}">
		                            <f:facet name="header"><p:outputLabel value="Editando administrador" /></f:facet>
		                            <p:outputLabel value="Nome" />
		                            <p:inputText id="admCrudNome" value="#{administradoresCRUDBean.administradorAtual.nome}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="admCrudNome"/>

		                            <p:outputLabel value="E-mail" />
		                            <p:inputText id="admCrudEmail" value="#{administradoresCRUDBean.administradorAtual.email}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="admCrudEmail"/>

		                            <p:outputLabel value="Nome de usuário" />
		                            <p:inputText id="admCrudUserName"  value="#{administradoresCRUDBean.administradorAtual.login}" required="true" requiredMessage="O campo deve ser informado" />
		                            <p:message for="admCrudUserName"/>

		                            <p:outputLabel value="senha" />
		                            <p:password id="admCrudPass" value="#{administradoresCRUDBean.administradorAtual.senha}" feedback="true"
		                                        promptLabel="Digite a nova senha"
		                                        weakLabel="Senha fraca"
		                                        goodLabel="Senha boa"
		                                        strongLabel="Senha forte" required="true" requiredMessage="O campo deve ser informado"/>
		                            <p:message for="admCrudPass"/>

		                            <f:facet name="footer">
		                                <div align="center">
		                                    <p:commandButton action="#{administradoresCRUDBean.cancelar()}" value="Cancelar" immediate="true">
		                                        <f:ajax execute="@form" render="@form"/>
		                                    </p:commandButton>
		                                    <p:commandButton action="#{administradoresCRUDBean.salvar()}" value="Salvar">
		                                        <f:ajax execute="@form" render="@form"/>
		                                    </p:commandButton>
		                                </div>
		                            </f:facet>
		                        </h:panelGrid>
	                        </h:form>
	                    </h:panelGroup>
	
	                    <h:panelGroup rendered="#{loginBean.administrador != null and pageControlBean.isInGerenciarSistema()}">
	                    	<h:form>
		                        <p:commandButton action="#{distribuidorBean.setCadastrando()}" value="Iniciar fase de cadastros" rendered="#{distribuidorBean.isDistribuindo()}"/>
		                        <p:commandButton action="#{distribuidorBean.setOrdenando()}" value="Iniciar fase de definição de preferências" rendered="#{distribuidorBean.isCadastrando()}" />
		                        <p:commandButton action="#{distribuidorBean.setDistribuindo()}" value="Executar distribuição de vagas" rendered="#{distribuidorBean.isOrdenando()}" />
	                        </h:form>
	                    </h:panelGroup>
					</f:view>
                </p:layoutUnit>
            </ui:define>
        </ui:composition>
    </h:body>
</html>